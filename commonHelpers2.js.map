{"version":3,"file":"commonHelpers2.js","sources":["../src/js/02-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\n\nconst DEFAULT_TIME = '00';\n\nconst startBtn = document.querySelector('[data-start]');\nconst dateTime = document.getElementById('datetime-picker');\n\nconst days = document.querySelector('[data-days]');\nconst hours = document.querySelector('[data-hours]');\nconst minutes = document.querySelector('[data-minutes]');\nconst seconds = document.querySelector('[data-seconds]');\n\nstartBtn.disabled = true;\n\nconst onClose = (selectedDates) => {\n  const selectedTime = selectedDates[0].getTime();\n  const currentTime = new Date().getTime();\n\n  if (currentTime > selectedTime) {\n    window.alert('Please choose a date in the future')\n    return;\n  }\n\n  startBtn.disabled = false;\n  finishedAt = selectedTime;\n}\n\nflatpickr(\"#datetime-picker\", {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose,\n});\n\nlet finishedAt = 0;\nlet timerId = null;\n\nconst onStart = () => {\n  dateTime.disabled = true;\n  startBtn.disabled = true;\n\n  timerId = setInterval(() => {\n    const currentTime = new Date().getTime();\n    const interval = finishedAt - currentTime;\n\n    if (0 > interval) {\n      clearInterval(timerId);\n\n      dateTime.disabled = false;\n\n      days.textContent = DEFAULT_TIME;\n      hours.textContent = DEFAULT_TIME;\n      minutes.textContent = DEFAULT_TIME;\n      seconds.textContent = DEFAULT_TIME;\n\n      return;\n    }\n\n    const {\n      days: daysValue,\n      hours: hoursValue,\n      minutes: minutesValue,\n      seconds: secondsValue,\n    } = convertMs(interval);\n\n    days.textContent = padNumberWithZero(daysValue);\n    hours.textContent = padNumberWithZero(hoursValue);\n    minutes.textContent = padNumberWithZero(minutesValue);\n    seconds.textContent = padNumberWithZero(secondsValue);\n  }, 1000);\n}\n\nconst padNumberWithZero = (value) => {\n  if (typeof value !== \"number\" || isNaN(value)) {\n    return \"00\";\n  }\n  return value.toString().padStart(2, \"0\");\n}\n\nconst convertMs = (ms) => {\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  const days = Math.floor(ms / day);\n  const hours = Math.floor((ms % day) / hour);\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n\nstartBtn.addEventListener('click', onStart);"],"names":["DEFAULT_TIME","startBtn","dateTime","days","hours","minutes","seconds","onClose","selectedDates","selectedTime","finishedAt","flatpickr","timerId","onStart","currentTime","interval","daysValue","hoursValue","minutesValue","secondsValue","convertMs","padNumberWithZero","value","ms"],"mappings":"wIAGA,MAAMA,EAAe,KAEfC,EAAW,SAAS,cAAc,cAAc,EAChDC,EAAW,SAAS,eAAe,iBAAiB,EAEpDC,EAAO,SAAS,cAAc,aAAa,EAC3CC,EAAQ,SAAS,cAAc,cAAc,EAC7CC,EAAU,SAAS,cAAc,gBAAgB,EACjDC,EAAU,SAAS,cAAc,gBAAgB,EAEvDL,EAAS,SAAW,GAEpB,MAAMM,EAAWC,GAAkB,CACjC,MAAMC,EAAeD,EAAc,CAAC,EAAE,QAAO,EAG7C,GAFoB,IAAI,KAAM,EAAC,QAAO,EAEpBC,EAAc,CAC9B,OAAO,MAAM,oCAAoC,EACjD,MACD,CAEDR,EAAS,SAAW,GACpBS,EAAaD,CACf,EAEAE,EAAU,mBAAoB,CAC5B,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAAJ,CACF,CAAC,EAED,IAAIG,EAAa,EACbE,EAAU,KAEd,MAAMC,EAAU,IAAM,CACpBX,EAAS,SAAW,GACpBD,EAAS,SAAW,GAEpBW,EAAU,YAAY,IAAM,CAC1B,MAAME,EAAc,IAAI,KAAM,EAAC,QAAO,EAChCC,EAAWL,EAAaI,EAE9B,GAAI,EAAIC,EAAU,CAChB,cAAcH,CAAO,EAErBV,EAAS,SAAW,GAEpBC,EAAK,YAAcH,EACnBI,EAAM,YAAcJ,EACpBK,EAAQ,YAAcL,EACtBM,EAAQ,YAAcN,EAEtB,MACD,CAED,KAAM,CACJ,KAAMgB,EACN,MAAOC,EACP,QAASC,EACT,QAASC,CACf,EAAQC,EAAUL,CAAQ,EAEtBZ,EAAK,YAAckB,EAAkBL,CAAS,EAC9CZ,EAAM,YAAciB,EAAkBJ,CAAU,EAChDZ,EAAQ,YAAcgB,EAAkBH,CAAY,EACpDZ,EAAQ,YAAce,EAAkBF,CAAY,CACrD,EAAE,GAAI,CACT,EAEME,EAAqBC,GACrB,OAAOA,GAAU,UAAY,MAAMA,CAAK,EACnC,KAEFA,EAAM,SAAU,EAAC,SAAS,EAAG,GAAG,EAGnCF,EAAaG,GAAO,CAMxB,MAAMpB,EAAO,KAAK,MAAMoB,EAAK,KAAG,EAC1BnB,EAAQ,KAAK,MAAOmB,EAAK,MAAO,IAAI,EACpClB,EAAU,KAAK,MAAQkB,EAAK,MAAO,KAAQ,GAAM,EACjDjB,EAAU,KAAK,MAASiB,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAApB,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,EAEAL,EAAS,iBAAiB,QAASY,CAAO"}